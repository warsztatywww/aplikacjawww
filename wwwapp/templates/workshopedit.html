{% extends "workshopbase.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block workshop_page_title %}
  {{ block.super }}
  {% if workshop and perms.wwwapp.change_workshop_status and workshop.is_workshop_editable %}
    <form method="post" class="d-inline">
      {% csrf_token %}
      {% if workshop.status %}
        {% if workshop.status == 'Z' %}
        <span class="btn-group-sm" role="group">
          <button type="submit" class="btn btn-outline-primary"
                  name="qualify" value="cancel"
                  onclick="return confirm('Czy na pewno chcesz odwoÅ‚aÄ‡ warsztaty?');">
            ðŸ˜ž OdwoÅ‚aj warsztaty
          </button>
        </span>
        {% elif workshop.status == 'X' %}
        <span class="btn-group-sm" role="group">
          <button type="submit" class="btn btn-outline-primary"
                  name="qualify" value="accept"
                  onclick="return confirm('Czy na pewno chcesz odwoÅ‚aÄ‡ odwoÅ‚anie warsztatÃ³w?');">
            ðŸ˜Š Jednak bÄ™dÄ…
          </button>
        </span>
        {% endif %}
        <span class="btn-group-sm" role="group">
          <button type="submit" class="btn btn-outline-primary"
                  name="qualify" value="delete"
                  onclick="return confirm('Czy na pewno chcesz usunÄ…Ä‡ status warsztatÃ³w?');">
            UsuÅ„ status
          </button>
        </span>
      {% else %}
        <span class="btn-group-sm" role="group">
        <button type="submit" class="btn btn-outline-primary"
                name="qualify" value="accept"
                onclick="return confirm('Czy na pewno chcesz zaakceptowaÄ‡?');">
          <i class="fas fa-check-circle"></i> Zaakceptuj
        </button>
        <button type="submit" class="btn btn-outline-primary"
                name="qualify" value="reject"
                onclick="return confirm('Czy na pewno chcesz odrzuciÄ‡?');">
          <i class="fas fa-minus-circle"></i> OdrzuÄ‡
        </button>
        </span>
      {% endif %}
    </form>
  {% endif %}
{% endblock %}

{% block workshop_page_content %}
  {% if not workshop and not has_perm_to_edit %}
      ZgÅ‚oszenia warsztatÃ³w nie sÄ… obecnie aktywne
  {% else %}
    <div role="tabpanel">
      {% crispy form %}
    </div>
  {% endif %}
{% endblock %}

{% block script %}
  {{ block.super }}
  <script src="{% static 'dist/tinymce.js' %}"></script>
  <link rel="stylesheet" href="{% static 'dist/tinymce.css' %}">

  <script>
    /* Hide the qualification settings when the is_qualifying checkbox is disabled */
    $(function() {
      if (! $("input[name='is_qualifying']").is(":checked"))
          $("#qualification_settings").hide();
    });

    $("input[name='is_qualifying']").change(function() {
      if ($(this).is(":checked")) {
        $("#qualification_settings").slideDown(500);
      } else {
        $("#qualification_settings").slideUp(500);
      }
    });
  </script>
{% endblock %}